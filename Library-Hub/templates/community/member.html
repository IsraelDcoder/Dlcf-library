{% extends 'base.html' %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/community.css') }}">
{% endblock %}

{% block title %}{{ member.name }} â€” Profile{% endblock %}

{% block content %}
<div class="community-page">
  <div class="profile-hero glass">
    <div class="left">
      <h2>{{ member.name }}</h2>
      <div class="muted">Role: <strong>{{ membership.role }}</strong></div>
      <p class="muted">{{ member.bio or 'No bio yet.' }}</p>
    </div>
    <div class="right">
      <a href="{{ url_for('community.feed', community_id=community_id) }}" class="btn">Back</a>
    </div>
  </div>
  {% if current_user.is_authenticated and (membership.role in ['teacher','admin'] and membership.user_id != current_user.id) %}
  <div style="margin-top:12px">
    <form action="{{ url_for('community.mute_member', community_id=community_id, user_id=member.id) }}" method="POST">
      <select name="seconds">
        <option value="0">Unmute</option>
        <option value="300">5 minutes</option>
        <option value="900">15 minutes</option>
        <option value="3600">1 hour</option>
        <option value="21600">6 hours</option>
        <option value="86400">24 hours</option>
      </select>
      <button class="btn btn-sm">Set Mute</button>
    </form>
  </div>
  {% endif %}

  <div class="grid">
    <div class="col main">
      <div class="panel glass">
        <h4>Recent posts</h4>
        {% for p in posts %}
        <div class="content-item"><a href="#">{{ p.title or p.body[:80] }}</a> <div class="muted">{{ p.created_at.strftime('%b %d') }}</div></div>
        {% else %}
        <div class="muted">No posts yet.</div>
        {% endfor %}
      </div>
    </div>
    <aside class="col side">
      <div class="panel glass">
        <h4>Recent comments</h4>
        {% for c in comments %}
        <div class="content-item">{{ c.body[:120] }} <div class="muted">{{ c.created_at.strftime('%b %d') }}</div></div>
        {% else %}
        <div class="muted">No comments yet.</div>
        {% endfor %}
      </div>
    </aside>
  </div>
</div>
{% endblock %}